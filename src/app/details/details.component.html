<div class="wrapper">
 
    <!-- Navbar -->
    <nav class="main-header navbar navbar-expand navbar-white navbar-light">
      <ul class="navbar-nav">
          <li class="nav-item">
              <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
          </li>
          <li class="nav-item d-none d-sm-inline-block">
              <a href="/home" class="nav-link">Home</a>
          </li>
          <li class="nav-item d-none d-sm-inline-block">
              <a href="/employer" class="nav-link">Employers</a>
          </li>
      </ul>
  
      <ul class="navbar-nav ml-auto">
      
          <li class="nav-item dropdown">
              
          </li>
          
          <li class="nav-item">
              <a class="nav-link" data-widget="fullscreen" href="#" role="button">
                  <i class="fas fa-expand-arrows-alt"></i>
              </a>
          </li>
          <li class="nav-item">
              <a class="nav-link" data-widget="control-sidebar" href="#" role="button">
                  <i class="fas fa-th-large"></i>
              </a>
          </li>
      </ul>
  </nav>

  <aside class="main-sidebar sidebar-dark-primary elevation-4">
    <a href="#" class="brand-link">
      <div class="app-logo">
        <i class="fas fa-clock"></i>
        <div class="logo-text">
            <h1>TimeTracker <span>Pro</span></h1>
        </div>
    </div>
    </a>
  
      <div class="sidebar">

          <nav class="mt-2">
              <ul class="nav nav-pills nav-sidebar flex-column" role="menu">
                  <li class="nav-item">
                      <a routerLink="/Dashboard" routerLinkActive="active" class="nav-link" (click)="reloadPage('/Dashboard')">
                          <i class="nav-icon fas fa-tachometer-alt"></i>
                          <B> <p>Tableau de bord</p></B>
                      </a>
                  </li>
                  <li class="nav-item">
                      <a routerLink="/Employer" routerLinkActive="active" class="nav-link" (click)="reloadPage('/Employer')">
                          <i class="fas fa-users nav-icon"></i>
                          <B><p> Employer</p></B>
                      </a>
                  </li>
                  <li class="nav-item">
                      <a routerLink="/EmployerDetail" routerLinkActive="active" class="nav-link" (click)="reloadPage('/EmployerDetail')">
                          <i class="fas fa-users nav-icon"></i>
                          <B><p> Employer Details</p></B>
                      </a>
                  </li>
                  <li class="nav-item">
                      <a routerLink="/Horaire" routerLinkActive="active" class="nav-link" (click)="reloadPage('/Horaire')">
                        <i class="fas fa-calendar-alt nav-icon"></i> 
                          <B><p> Horaire de Travail</p></B>
                      </a>
                  </li>
                  <li class="nav-item">
                      <a routerLink="/Pointage" routerLinkActive="active" class="nav-link" (click)="reloadPage('/Pointage')">
                        <i class="fas fa-clock nav-icon"></i>
                          <B><p> Pointage</p></B>
                      </a>
                  </li>
                  <li class="nav-item">
                      <a routerLink="/Rapport" routerLinkActive="active" class="nav-link" (click)="reloadPage('/Rapport')">
                          <i class="fas fa-calendar-check nav-icon"></i>
                          <B><p>Rapport </p></B>
                      </a>
                  </li>
                  <li class="nav-item">
                      <a routerLink="/Anomalie" routerLinkActive="active" class="nav-link" (click)="reloadPage('/Anomalie')">
                        <i class="fas fa-exclamation-triangle nav-icon"></i>
                          <B><p> Anomalie</p></B>
                      </a>
                  </li>
                  <li class="nav-item">
                      <a routerLink="/Calendrier" routerLinkActive="active" class="nav-link" (click)="reloadPage('/Calendrier')">
                          <i class="fas fa-calendar-alt nav-icon"></i>
                          <B><p>Calendrier de Présences</p></B>
                      </a>
                  </li>
                  <li class="nav-item">
                    <a routerLink="/Conge" routerLinkActive="active" class="nav-link" (click)="reloadPage('/Conge')">
                      <i class="fas fa-plane nav-icon"></i>
                        <B><p>Congé</p></B>
                    </a>
                </li>
                <li class="nav-item">
                  <a routerLink="/Conge" routerLinkActive="active" class="nav-link" (click)="reloadPage('/Conge')">
                    <i class="fas fa-plane nav-icon"></i>
                      <B><p>Congé</p></B>
                  </a>
              </li>
              <li class="nav-item" *ngIf="userRole === 'Super_Admin'" >
                <a routerLink="/Admin" routerLinkActive="active" class="nav-link" (click)="reloadPage('/Admin')">
                    <i class="fas fa-user-shield nav-icon"></i>
                    <B><p>Administrateur</p></B>
                </a>
            </li>
            <li class="nav-item">
                <a routerLink="/ChatBot" routerLinkActive="active" class="nav-link" (click)="reloadPage('/ChatBot')">
                    <i class="fas fa-robot nav-icon"></i>
                    <B><p>Chatbot</p></B>
                </a>
            </li>
                  <li class="nav-item">
                      <a (click)="logout()" class="nav-link">
                          <i class="nav-icon fas fa-sign-out-alt"></i>
                          <B><p>Déconnexion</p></B>
                      </a>
                  </li>
              </ul>
          </nav>
      </div>
  </aside>
  
  
  
  
    <!-- Content Wrapper -->
    <div class="content-wrapper">
        <div class="content-header">
            <div class="container-fluid">
                <div class="row mb-2">
                    <div class="col-sm-6">
                      <div class="app-logo2">
                        <i class="fas fa-clock"></i>
                        <div class="logo-text">
                            <h1>TimeTracker <span>Pro</span></h1>
                        </div>
                    </div>
                    </div>
                    <div class="col-sm-6">
                        <ol class="breadcrumb float-sm-right">
                            <li class="breadcrumb-item"><a href="#">Home</a></li>
                            <li class="breadcrumb-item active">Dashboard</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>

        



        <!-- <div class="container mt-5">
            <div class="card shadow-lg">
              <div class="card-header bg-primary text-white text-center">
                <h4 class="mb-0">Détails de l'Employé</h4>
              </div>
              <div class="card-body">
                <form [formGroup]="employerForm" (ngSubmit)="onSubmit()">
                  <div class="row">

                    <div class="col-md-4 text-center">
                      <img *ngIf="employerForm.get('photoProfil')?.value" 
                           [src]="'data:image/png;base64,' + employerForm.get('photoProfil')?.value" 
                           alt="Profil de {{ employerForm.get('nom')?.value }}" 
                           class="rounded-circle img-fluid border border-3 mb-3">
                      <input type="file" class="form-control mt-3" >
                    </div>
          

                    <div class="col-md-8">
                      <div class="mb-3">
                        <label for="nom" class="form-label">Nom</label>
                        <input type="text" class="form-control" id="nom" formControlName="nom">
                      </div>
                      <div class="mb-3">
                        <label for="prenom" class="form-label">Prénom</label>
                        <input type="text" class="form-control" id="prenom" formControlName="prenom">
                      </div>
                      <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" formControlName="email">
                      </div>
                      <div class="mb-3">
                        <label for="telephone" class="form-label">Téléphone</label>
                        <input type="text" class="form-control" id="telephone" formControlName="telephone">
                      </div>
                      <div class="mb-3">
                        <label for="dateNaissance" class="form-label">Date de Naissance</label>
                        <input type="date" class="form-control" id="dateNaissance" formControlName="dateNaissance">
                      </div>
                      <div class="mb-3">
                        <label for="dateEmbauche" class="form-label">Date d'Embauche</label>
                        <input type="date" class="form-control" id="dateEmbauche" formControlName="dateEmbauche">
                      </div>
                      <div class="mb-3">
                        <label for="genre" class="form-label">Genre</label>
                        <select class="form-select" id="genre" formControlName="genre">
                          <option value="Homme">Homme</option>
                          <option value="Femme">Femme</option>
                        </select>
                      </div>
                      <div class="mb-3">
                        <label for="departement" class="form-label">Département</label>
                        <input type="text" class="form-control" id="departement" formControlName="departement">
                      </div>
                      <div class="mb-3">
                        <label for="cin" class="form-label">CIN</label>
                        <input type="text" class="form-control" id="cin" formControlName="cin">
                      </div>
                      <div class="mb-3">
                        <label for="adresse" class="form-label">Adresse</label>
                        <input type="text" class="form-control" id="adresse" formControlName="adresse">
                      </div>
                    </div>
                  </div>
          
           
                  <div class="text-center mt-4">
                    <button type="submit" class="btn btn-primary me-2" [disabled]="employerForm.invalid">
                      <i class="fas fa-save"></i> Enregistrer
                    </button>
                    <button type="button" class="btn btn-secondary" (click)="goBack()">
                      <i class="fas fa-arrow-left"></i> Retour
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>-->



          <div class="container mt-5">
            <div class="card shadow-lg">
              <div class="card-header bg-primary text-white text-center">
                <h4 class="mb-0">Détails de l'Employé</h4>
              </div>
              <div class="card-body">
                <form [formGroup]="employerForm" (ngSubmit)="onSubmit()">
                  <div class="row">
                    <!-- Colonne de gauche : Photo de profil -->
                    <div class="col-md-4 text-center">
                        <img *ngIf="employerForm.get('photoProfil')?.value" 
                             [src]="'data:image/png;base64,' + employerForm.get('photoProfil')?.value" 
                             alt="Profil de {{ employerForm.get('nom')?.value }}" 
                             class="rounded-circle img-fluid border border-3 mb-3">
                        <input type="file" class="form-control mt-3" (change)="onFileChange($event)">
                      </div>
                    <!-- Colonne de droite : Formulaire -->
                    <div class="col-md-8">
                      <!-- Exemple pour le champ "nom" -->
                      <div class="mb-3">
                        <label for="nom" class="form-label">Nom</label>
                        <div class="input-group">
                          <input type="text" class="form-control" id="nom" formControlName="nom" [readOnly]="!editingStates['nom']">
                          <button type="button" class="btn btn-outline-secondary" (click)="toggleEdit('nom')">
                            <i class="fas fa-pencil-alt"></i> <!-- Icône de crayon -->
                          </button>
                        </div>
                      </div>
          
                      <!-- Répétez la structure ci-dessus pour chaque champ -->
                      <div class="mb-3">
                        <label for="prenom" class="form-label">Prénom</label>
                        <div class="input-group">
                          <input type="text" class="form-control" id="prenom" formControlName="prenom" [readOnly]="!editingStates['prenom']">
                          <button type="button" class="btn btn-outline-secondary" (click)="toggleEdit('prenom')">
                            <i class="fas fa-pencil-alt"></i>
                          </button>
                        </div>
                      </div>

                      <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <div class="input-group">
                          <input type="text" class="form-control" id="email" formControlName="email" [readOnly]="!editingStates['email']">
                          <button type="button" class="btn btn-outline-secondary" (click)="toggleEdit('email')">
                            <i class="fas fa-pencil-alt"></i>
                          </button>
                        </div>
                      </div>

                      <div class="mb-3">
                        <label for="telephone" class="form-label">telephone</label>
                        <div class="input-group">
                          <input type="text" class="form-control" id="telephone" formControlName="telephone" [readOnly]="!editingStates['telephone']">
                          <button type="button" class="btn btn-outline-secondary" (click)="toggleEdit('telephone')">
                            <i class="fas fa-pencil-alt"></i>
                          </button>
                        </div>
                      </div>

                      <div class="mb-3">
                        <label for="dateNaissance" class="form-label">Date de Naissance</label>
                        <div class="input-group">
                          <input type="date" class="form-control" id="dateNaissance" formControlName="dateNaissance" [readOnly]="!editingStates['dateNaissance']">
                          <button type="button" class="btn btn-outline-secondary" (click)="toggleEdit('dateNaissance')">
                            <i class="fas fa-pencil-alt"></i>
                          </button>
                        </div>
                      </div>

                      <div class="mb-3">
                        <label for="cin" class="form-label">CIN</label>
                        <div class="input-group">
                          <input type="text" class="form-control" id="cin" formControlName="cin" [readOnly]="!editingStates['cin']">
                          <button type="button" class="btn btn-outline-secondary" (click)="toggleEdit('cin')">
                            <i class="fas fa-pencil-alt"></i>
                          </button>
                        </div>
                      </div>
                      
                      <div class="mb-3">
                        <label for="genre" class="form-label">Genre</label>
                        <div class="input-group">
                          <select class="form-select" id="genre" formControlName="genre" [disabled]="!editingStates['genre']">
                            <option value="Homme">Homme</option>
                            <option value="Femme">Femme</option>
                          </select>
                          <button type="button" class="btn btn-outline-secondary" (click)="toggleEdit('genre')">
                            <i class="fas fa-pencil-alt"></i>
                          </button>
                        </div>
                      </div>
                      
                      <div class="mb-3">
                        <label for="departement" class="form-label">Département</label>
                        <div class="input-group">
                          <select class="form-control" id="departement" formControlName="departement" [disabled]="!editingStates['departement']">
                            <option value="" disabled selected>Choisissez un département</option>
                            <option *ngFor="let dept of departements" [value]="dept">{{ dept }}</option>
                          </select>
                          <button type="button" class="btn btn-outline-secondary" (click)="toggleEdit('departement')">
                            <i class="fas fa-pencil-alt"></i>
                          </button>
                        </div>
                      </div>
                      <div class="mb-3">
                        <label for="adresse" class="form-label">Adresse</label>
                        <div class="input-group">
                          <input type="text" class="form-control" id="prenom" formControlName="adresse" [readOnly]="!editingStates['adresse']">
                          <button type="button" class="btn btn-outline-secondary" (click)="toggleEdit('adresse')">
                            <i class="fas fa-pencil-alt"></i>
                          </button>
                        </div>
                      </div>
          
                      <!-- Ajoutez les autres champs de la même manière -->
                    </div>
                  </div>
          
                  <!-- Boutons -->
                  <div class="text-center mt-4">
                    <button type="submit" class="btn btn-primary me-2" [disabled]="employerForm.invalid">
                      <i class="fas fa-save"></i> Enregistrer
                    </button>
                    <button type="button" class="btn btn-secondary" (click)="goBack()">
                      <i class="fas fa-arrow-left"></i> Retour
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>



          
    </div>   
  </div>
  